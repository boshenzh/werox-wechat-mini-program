<view class="page">
  <!-- Hero Section with Brand -->
  <view class="hero">
    <view class="hero-content">
      <view class="brand">
        <image class="brand-logo-large" src="../../assets/werox_logo_thin.png" mode="aspectFit" />
        <view class="hero-copy">
          <text class="hero-kicker">HYROX 社区赛事</text>
          <text class="hero-subline">找搭子 · 报名 · 开练</text>
        </view>
      </view>
      <view class="hero-stats" wx:if="{{events.length > 0}}">
        <text class="stat-number">{{events.length}}</text>
        <text class="stat-label">场赛事</text>
      </view>
    </view>
  </view>

  <!-- Skeleton Loading States -->
  <view class="cards" wx:if="{{loading}}">
    <view class="skeleton-card" wx:for="{{[1, 2]}}" wx:key="index">
      <view class="skeleton-cover">
        <view class="skeleton skeleton-badge"></view>
      </view>
      <view class="skeleton-body">
        <view class="skeleton skeleton-title"></view>
        <view class="skeleton skeleton-meta"></view>
        <view class="skeleton skeleton-desc"></view>
      </view>
    </view>
  </view>

  <!-- Event Cards -->
  <view class="cards" wx:else>
    <view
      class="event-card card animate-in"
      wx:for="{{events}}"
      wx:key="id"
      data-event-id="{{item.id}}"
      bindtap="goDetail"
      hover-class="card-active"
      style="animation-delay: {{index * 0.08}}s"
    >
      <!-- Cover Image with Overlay -->
      <view class="event-cover">
        <image class="cover-img" src="{{item.coverUrl}}" mode="aspectFill" lazy-load="true" wx:if="{{item.coverUrl}}" />
        <view class="cover-overlay"></view>
        <view class="event-badge status-badge-{{item.status}}">{{item.statusText}}</view>
        <view class="signup-chip">
          <view class="signup-avatars" wx:if="{{item.participantAvatars && item.participantAvatars.length > 0}}">
            <image
              class="signup-avatar"
              wx:for="{{item.participantAvatars}}"
              wx:for-item="avatar"
              wx:for-index="avatarIndex"
              wx:key="avatarIndex"
              src="{{avatar}}"
              mode="aspectFill"
            />
          </view>
          <text class="signup-text">{{item.signupText}}</text>
        </view>
        <!-- Format Mode Badge -->
        <view class="format-badge" wx:if="{{item.formatMode && item.formatMode !== 'for_time'}}">
          <text wx:if="{{item.formatMode === 'time_cap'}}">限时赛</text>
          <text wx:if="{{item.formatMode === 'amrap'}}">AMRAP</text>
          <text wx:if="{{item.formatMode === 'emom'}}">EMOM</text>
          <text wx:if="{{item.formatMode === 'rounds'}}">多轮赛</text>
        </view>
      </view>

      <!-- Event Info -->
      <view class="event-body">
        <text class="event-title">{{item.title}}</text>
        <view class="event-meta-row">
          <view class="meta-item">
            <text class="event-meta">{{item.dateText}}</text>
          </view>
          <view class="meta-divider"></view>
          <view class="meta-item">
            <text class="event-meta">{{item.location}}</text>
          </view>
          <view class="meta-divider"></view>
          <view class="meta-item">
            <text class="event-meta distance-text">{{item.distanceText}}</text>
          </view>
        </view>

        <!-- Intensity indicators removed (强度/耐力 bar) -->
      </view>
    </view>
  </view>

  <!-- Empty State -->
  <view class="empty-state-box" wx:if="{{!loading && events.length === 0}}">
    <view class="empty-state-icon">
      <image src="/assets/icons/running.png" mode="aspectFit" />
    </view>
    <text class="empty-state-title">暂无赛事</text>
    <text class="empty-state-desc">请稍后再来查看最新赛事安排</text>
  </view>
</view>
